(()=>{var e={};e.id=931,e.ids=[931],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9401:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),r(9627),r(1382),r(167);var n=r(4969),s=r(4849),a=r(1512),o=r.n(a),i=r(2137),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,9627)),"C:\\Users\\Administrator\\Desktop\\Summa AI\\apps\\web\\app\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,1382)),"C:\\Users\\Administrator\\Desktop\\Summa AI\\apps\\web\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,167,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Administrator\\Desktop\\Summa AI\\apps\\web\\app\\page.tsx"],u="/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new n.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5286:(e,t,r)=>{Promise.resolve().then(r.bind(r,9374))},9374:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var n=r(577),s=r(1201),a=r.n(s),o=r(9628),i=r(282),l=r(6838),d=r(7923);function c({lectures:e,activeLecture:t,showNewLectureForm:r,newLectureTitle:s,pending:a,onSelectLecture:o,onShowNewForm:i,onHideNewForm:l,onTitleChange:c,onCreateLecture:u}){return(0,n.jsxs)("div",{style:{marginBottom:40,padding:24,background:"#0f1530",borderRadius:16},children:[n.jsx("h2",{style:{fontSize:20,marginBottom:16,fontWeight:600},children:"\uD83D\uDCDA 강의 선택"}),r?(0,n.jsxs)("div",{style:{padding:20,background:"#192041",borderRadius:12,border:"2px solid #5865f2"},children:[n.jsx("h3",{style:{fontSize:18,marginBottom:12,fontWeight:600},children:"새 강의 만들기"}),(0,n.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[n.jsx("input",{type:"text",value:s,onChange:e=>c(e.target.value),onKeyDown:e=>"Enter"===e.key&&u(),placeholder:"강의 제목을 입력하세요...",style:{flex:1,padding:"12px 16px",borderRadius:8,background:"#0f1530",color:"#fff",border:"1px solid #334",fontSize:15,outline:"none"},autoFocus:!0}),n.jsx("button",{disabled:a||!s.trim(),onClick:u,style:{...d.fn,opacity:!s.trim()||a?.5:1},children:"✓ 생성"}),n.jsx("button",{onClick:l,style:{...d.fn,background:"#555"},children:"취소"})]}),n.jsx("p",{style:{fontSize:13,opacity:.6,marginTop:8},children:'예: "2024 AI 기술 세미나", "Python 프로그래밍 강의 1주차"'})]}):(0,n.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center",flexWrap:"wrap"},children:[n.jsx("button",{disabled:a,onClick:i,style:d.fn,children:"➕ 새 강의 만들기"}),(0,n.jsxs)("select",{value:t?.id??"",onChange:t=>{let r=t.target.value;o(e.find(e=>e.id===r)??null)},style:d.MM,children:[n.jsx("option",{value:"",children:"기존 강의 선택..."}),e.map(e=>n.jsx("option",{value:e.id,children:e.title},e.id))]}),t&&(0,n.jsxs)("span",{style:{marginLeft:16,fontSize:14,opacity:.8},children:["선택됨:"," ",n.jsx("b",{style:{color:"#5865f2"},children:t.title})]})]})]})}function u({recording:e,paused:t,pending:r,recordingCompleted:s,currentSessionId:a,onStartRecording:o,onPauseRecording:l,onResumeRecording:d,onStopRecording:c}){let u=(0,i.useRouter)();return(0,n.jsxs)("div",{style:{marginBottom:40,padding:32,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:16,position:"relative"},children:[n.jsx("div",{style:{marginBottom:24,display:"flex",alignItems:"center",gap:16},children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("h2",{style:{fontSize:24,marginBottom:8,fontWeight:700,display:"flex",alignItems:"center",gap:12},children:["\uD83C\uDF99️ 1단계: 음성 녹음",s&&n.jsx("span",{style:{padding:"6px 16px",background:"#27ae60",borderRadius:8,fontSize:14,fontWeight:600},children:"✓ 완료"})]}),n.jsx("p",{style:{opacity:.9,fontSize:14,maxWidth:600},children:"마이크를 사용해서 실시간으로 녹음하세요"})]})}),n.jsx("div",{style:{display:"flex",justifyContent:"center",gap:16,flexWrap:"wrap"},children:s?n.jsx("div",{style:{padding:"32px 48px",background:"rgba(255, 255, 255, 0.1)",borderRadius:16,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:320,gap:16},children:n.jsx("button",{onClick:()=>{a&&u.push(`/sessions/${a}?autoStart=true`)},style:{padding:"18px 36px",background:"#27ae60",color:"#fff",borderRadius:12,border:"none",cursor:"pointer",fontSize:18,fontWeight:700,display:"flex",alignItems:"center",justifyContent:"center",gap:8,transition:"all 0.3s",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.05)",e.currentTarget.style.boxShadow="0 6px 16px rgba(0,0,0,0.4)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)",e.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.3)"},children:"다음 단계로 (텍스트 변환) →"})}):e?(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:32,padding:"32px"},children:[(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:16},children:[n.jsx("div",{style:{width:24,height:24,borderRadius:"50%",background:"#27ae60",animation:"pulse 1.5s infinite",boxShadow:"0 0 20px rgba(39, 174, 96, 0.6)"}}),n.jsx("div",{style:{fontSize:20,fontWeight:700,color:"#fff"},children:t?"녹음 일시정지 중":"녹음 진행 중"})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:12,marginTop:8},children:[t?(0,n.jsxs)("button",{onClick:d,style:{padding:"12px 24px",background:"#27ae60",color:"#fff",borderRadius:8,border:"none",cursor:"pointer",fontSize:14,fontWeight:600,display:"flex",alignItems:"center",gap:8,transition:"all 0.2s",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.4)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.3)"},children:[n.jsx("span",{style:{fontSize:18},children:"▶️"}),"녹음 재개"]}):(0,n.jsxs)("button",{onClick:l,style:{padding:"12px 24px",background:"#f39c12",color:"#fff",borderRadius:8,border:"none",cursor:"pointer",fontSize:14,fontWeight:600,display:"flex",alignItems:"center",gap:8,transition:"all 0.2s",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.4)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.3)"},children:[n.jsx("span",{style:{fontSize:18},children:"⏸️"}),"녹음 중지"]}),(0,n.jsxs)("button",{onClick:c,style:{padding:"12px 24px",background:"#c0392b",color:"#fff",borderRadius:8,border:"none",cursor:"pointer",fontSize:14,fontWeight:600,display:"flex",alignItems:"center",gap:8,transition:"all 0.2s",boxShadow:"0 2px 8px rgba(0,0,0,0.3)"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(0,0,0,0.4)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 2px 8px rgba(0,0,0,0.3)"},children:[n.jsx("span",{style:{fontSize:18},children:"⏹️"}),"녹음 종료"]})]})]}):(0,n.jsxs)("button",{disabled:r,onClick:o,style:{padding:"48px 64px",background:"#e74c3c",color:"#fff",borderRadius:20,border:"none",cursor:r?"not-allowed":"pointer",fontSize:16,fontWeight:700,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",transition:"all 0.3s",boxShadow:"0 8px 24px rgba(0,0,0,0.4)",opacity:r?.5:1,minWidth:320},onMouseEnter:e=>{r||(e.currentTarget.style.transform="scale(1.05)",e.currentTarget.style.boxShadow="0 12px 32px rgba(0,0,0,0.5)")},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)",e.currentTarget.style.boxShadow="0 8px 24px rgba(0,0,0,0.4)"},children:[n.jsx("span",{style:{fontSize:56,marginBottom:12},children:"\uD83C\uDFA4"}),n.jsx("div",{style:{fontSize:22,fontWeight:700},children:"녹음 시작"}),n.jsx("div",{style:{fontSize:14,opacity:.9,marginTop:8},children:"클릭하면 바로 녹음이 시작됩니다"})]})})]})}function p({show:e,sessions:t,onClose:r,onSessionClick:s,onDeleteSession:a}){return e?n.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(4px)"},onClick:r,children:(0,n.jsxs)("div",{style:{background:"#0f1530",borderRadius:16,padding:32,maxWidth:900,width:"90%",maxHeight:"80vh",overflow:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:24},children:[n.jsx("h2",{style:{fontSize:24,fontWeight:700},children:"\uD83D\uDCCB 녹음 기록"}),n.jsx("button",{onClick:r,style:{padding:"8px 16px",background:"#555",color:"#fff",borderRadius:8,border:"none",cursor:"pointer",fontSize:14,fontWeight:600},children:"✕ 닫기"})]}),(0,n.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",background:"#12183a",borderRadius:12,overflow:"hidden"},children:[n.jsx("thead",{children:(0,n.jsxs)("tr",{style:{background:"#1a2045"},children:[n.jsx("th",{style:d.th,children:"번호"}),n.jsx("th",{style:d.th,children:"생성 일시"}),n.jsx("th",{style:d.th,children:"상태"}),n.jsx("th",{style:d.th,children:"작업"})]})}),(0,n.jsxs)("tbody",{children:[t.map((e,t)=>(0,n.jsxs)("tr",{style:{cursor:"pointer",transition:"background 0.2s"},onClick:()=>{r(),s(e.id)},onMouseEnter:e=>e.currentTarget.style.background="#1e2550",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:[n.jsx("td",{style:d.td,children:t+1}),n.jsx("td",{style:d.td,children:new Date(e.createdAt??Date.now()).toLocaleString("ko-KR")}),n.jsx("td",{style:d.td,children:n.jsx("span",{style:{padding:"4px 12px",borderRadius:12,fontSize:13,background:"completed"===e.status?"#27ae60":"processing"===e.status?"#f39c12":"#95a5a6",color:"#fff"},children:"idle"===e.status?"대기 중":"processing"===e.status?"처리 중":"completed"===e.status?"완료":e.status})}),(0,n.jsxs)("td",{style:d.td,children:[n.jsx("button",{onClick:t=>{t.stopPropagation(),r(),s(e.id)},style:{...d.fS,background:"#27ae60"},children:"열기"}),n.jsx("button",{onClick:t=>{t.stopPropagation(),a(e)},style:{...d.fS,background:"#e74c3c"},children:"삭제"})]})]},e.id)),0===t.length&&n.jsx("tr",{children:n.jsx("td",{colSpan:4,style:{...d.td,textAlign:"center",opacity:.6,padding:24},children:"아직 녹음이 없습니다. 녹음을 시작하거나 파일을 업로드하세요."})})]})]})]})}):null}function x(){let e=(0,i.useRouter)(),{lectures:t,error:r,createLecture:s}=function(){let[e,t]=(0,o.useState)([]),[r,n]=(0,o.useState)(null);async function s(e){if(!e.trim())return alert("강의 제목을 입력해주세요."),null;try{n(null);let r=await (0,l.Nv)("/lectures",{method:"POST",body:JSON.stringify({title:e.trim()})});return t(e=>[r,...e]),r}catch(t){console.error("Failed to create lecture:",t);let e=t instanceof l.MS?t.message:"강의 생성에 실패했습니다.";return n(e),alert(e),null}}return{lectures:e,setLectures:t,error:r,setError:n,createLecture:s}}(),[x,g]=(0,o.useState)(null),[f,y]=(0,o.useState)(!1),[h,m]=(0,o.useState)(""),[b,j]=(0,o.useState)(!1),{sessions:S,createSession:v,deleteSession:k}=function(e){let[t,r]=(0,o.useState)([]);async function n(e,t){try{let n=await (0,l.Nv)(`/lectures/${e}/sessions`,{method:"POST",body:JSON.stringify({mode:t,policy:{lengthMin:55,overlapSec:5,vadPause:!0}})});return r(e=>[...e,n]),n.id}catch(e){return console.error("Failed to create session:",e),alert(e instanceof l.MS?e.message:"세션 생성에 실패했습니다."),null}}async function s(e){if(confirm("이 녹음을 삭제하시겠습니까?"))try{await (0,l.Nv)(`/lectures/${e.lectureId}/sessions/${e.id}`,{method:"DELETE"}),r(t=>t.filter(t=>t.id!==e.id))}catch(e){console.error("Failed to delete session:",e),alert(e instanceof l.MS?e.message:"세션 삭제에 실패했습니다.")}}return{sessions:t,setSessions:r,createSession:n,deleteSession:s}}(0),[w,C]=(0,o.useState)(!1),R=function(e,t){let[r,n]=(0,o.useState)(!1),[s,a]=(0,o.useState)(!1),[i,d]=(0,o.useState)(null),[c,u]=(0,o.useState)(!1),[p,x]=(0,o.useState)(null);async function g(){if(!e){alert("먼저 강의를 선택하거나 생성하세요.");return}let r=await t(e.id,"manual");if(r)try{let e=await navigator.mediaDevices.getUserMedia({audio:!0}),t=new MediaRecorder(e),s=[];t.ondataavailable=e=>{e.data.size>0&&s.push(e.data)},t.onstop=async()=>{e.getTracks().forEach(e=>e.stop());let t=new Blob(s,{type:"audio/webm"}),n=new FormData;n.append("file",t,"recording.webm");try{await (0,l.zi)(`/sessions/${r}/upload`,n),u(!0),x(r)}catch(e){console.error("Upload failed:",e),alert(e instanceof l.MS?e.message:"녹음 업로드에 실패했습니다.")}},t.start(),d(t),n(!0)}catch(e){console.error("Failed to start recording:",e),alert("마이크 접근에 실패했습니다. 브라우저 권한을 확인해주세요.")}}return{recording:r,paused:s,recordingCompleted:c,currentSessionId:p,setRecordingCompleted:u,setCurrentSessionId:x,startRecording:g,pauseRecording:function(){i&&"recording"===i.state&&(i.pause(),a(!0))},resumeRecording:function(){i&&"paused"===i.state&&(i.resume(),a(!1))},stopRecording:function(){i&&"inactive"!==i.state&&(i.stop(),d(null),n(!1),a(!1))}}}(x,v),D=function(e,t){let r=(0,o.useRef)(null),[n,s]=(0,o.useState)(!1),[a,i]=(0,o.useState)(!1),[d,c]=(0,o.useState)(null);async function u(n){let a=n.target.files?.[0];if(!a)return;if(!e){alert("먼저 강의를 선택하거나 생성하세요.");return}s(!0);let o=await t(e.id,"manual");if(!o){s(!1);return}let d=new FormData;d.append("file",a);try{await (0,l.zi)(`/sessions/${o}/upload`,d),s(!1),i(!0),c(o)}catch(e){console.error("Upload failed:",e),alert(e instanceof l.MS?e.message:"파일 업로드에 실패했습니다."),s(!1)}r.current&&(r.current.value="")}return{fileInputRef:r,uploadingFile:n,fileUploaded:a,currentSessionId:d,setFileUploaded:i,setCurrentSessionId:c,handleFileSelect:u}}(x,v);async function T(){if(!h.trim())return;j(!0);let e=await s(h);j(!1),e&&(g(e),m(""),y(!1))}let z=R.currentSessionId||D.currentSessionId;return(0,n.jsxs)("main",{style:d.HV,className:"jsx-a6d472ead20663ee",children:[n.jsx("h1",{style:{fontSize:32,marginBottom:8,fontWeight:700},className:"jsx-a6d472ead20663ee",children:"\uD83C\uDFA4 Summa AI — 강의 녹음 자동 요약"}),n.jsx("p",{style:{opacity:.7,marginBottom:32,fontSize:16},className:"jsx-a6d472ead20663ee",children:"강의를 녹음하고 자동으로 텍스트 변환 및 요약을 생성합니다"}),n.jsx(c,{lectures:t,activeLecture:x,showNewLectureForm:f,newLectureTitle:h,pending:b,onSelectLecture:e=>{g(e),R.setRecordingCompleted(!1),D.setFileUploaded(!1)},onShowNewForm:()=>y(!0),onHideNewForm:()=>{y(!1),m("")},onTitleChange:m,onCreateLecture:T}),x&&(0,n.jsxs)(n.Fragment,{children:[n.jsx("div",{style:{marginBottom:16,display:"flex",justifyContent:"flex-end"},className:"jsx-a6d472ead20663ee",children:n.jsx("button",{onClick:()=>C(!0),style:{padding:"10px 18px",background:"#0f1530",color:"#fff",borderRadius:10,border:"1px solid #334",cursor:"pointer",fontSize:14,fontWeight:600,transition:"all 0.2s",display:"flex",alignItems:"center",gap:8},onMouseEnter:e=>{e.currentTarget.style.background="#192041",e.currentTarget.style.borderColor="#5865f2"},onMouseLeave:e=>{e.currentTarget.style.background="#0f1530",e.currentTarget.style.borderColor="#334"},className:"jsx-a6d472ead20663ee",children:"\uD83D\uDCCB 녹음 기록"})}),n.jsx(u,{recording:R.recording,paused:R.paused,pending:b,recordingCompleted:R.recordingCompleted,currentSessionId:z,onStartRecording:R.startRecording,onPauseRecording:R.pauseRecording,onResumeRecording:R.resumeRecording,onStopRecording:R.stopRecording})]}),!x&&(0,n.jsxs)("div",{style:{marginBottom:40,padding:48,background:"#0f1530",borderRadius:16,textAlign:"center",border:"2px dashed #334"},className:"jsx-a6d472ead20663ee",children:[n.jsx("div",{style:{fontSize:48,marginBottom:16},className:"jsx-a6d472ead20663ee",children:"\uD83D\uDCDA"}),n.jsx("h3",{style:{fontSize:20,marginBottom:8,opacity:.9},className:"jsx-a6d472ead20663ee",children:"강의를 선택하거나 생성하세요"}),n.jsx("p",{style:{opacity:.6,fontSize:14},className:"jsx-a6d472ead20663ee",children:'위에서 "새 강의 만들기" 버튼을 눌러 시작하세요'})]}),n.jsx(p,{show:w&&!!x,sessions:S,onClose:()=>C(!1),onSessionClick:t=>e.push(`/sessions/${t}`),onDeleteSession:k}),n.jsx(a(),{id:"a6d472ead20663ee",children:"@-webkit-keyframes pulse{0%,100%{opacity:1}50%{opacity:.7}}@-moz-keyframes pulse{0%,100%{opacity:1}50%{opacity:.7}}@-o-keyframes pulse{0%,100%{opacity:1}50%{opacity:.7}}@keyframes pulse{0%,100%{opacity:1}50%{opacity:.7}}"})]})}},9627:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>o,__esModule:()=>a,default:()=>i});var n=r(9143);let s=(0,n.createProxy)(String.raw`C:\Users\Administrator\Desktop\Summa AI\apps\web\app\page.tsx`),{__esModule:a,$$typeof:o}=s;s.default;let i=(0,n.createProxy)(String.raw`C:\Users\Administrator\Desktop\Summa AI\apps\web\app\page.tsx#default`)}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[657,907],()=>r(9401));module.exports=n})();